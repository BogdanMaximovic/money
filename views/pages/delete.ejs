<% include ../partials/header %>
<% include ../pages/button %>
<script>
    $(document).ready(function() {
      $('#addingNew').modal('show') 
      $('#success').hide();

      $('#save').click(function(e){
          e.preventDefault();
          let id = $("#id option:selected").val();
          let data = {};
          data.id = id;

          console.log(id)
          
          $.ajax({
            type: 'post',
            data: JSON.stringify(data),
            contentType: 'application/json',
            url: 'http://localhost:4200/delete',
            success: function(data) {
              console.log('success');
              console.log(JSON.stringify(data));
              }
            });
          $('#success').show();
            let delay = 1500; 
            let url = 'http://localhost:4200/exp';
            setTimeout(function(){ window.location = url }, delay);
        })
});
</script>
<!-- MODAL -->
<div class="modal fade" id="addingNew">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Delete category</h4>
                <button class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body h5">Are you sure??</div>
            <div class="modal-text">
                <form action="/addingNew" method="POST" id="form">
                    <p class="text-danger text-center">Select category for deleting</p>
                    <select class="nav rounded m-auto" id="id">
                        <% print.forEach(function(name){ %>
                        <option class="nav-item p-2 border-bottom text-danger" value="<%= name.categories_id %>">
                            <%= name.categories_name %>
                        </option>
                        <% }) %>
                    </select>
                </form>
            </div>
            <div class="modal-footer m-auto">
                <a class="btn btn-danger text-light" data-dismiss="modal" id="save">Delete</a>
                <a class="btn btn-dark text-light" data-dismiss="modal" id="close" href="/exp">Close</a>
            </div>
        </div>
    </div>
</div>
<div class="row text-center m-5" id="success">
    <div class="col m-auto">
        <h1 class="badge badge-danger" id="show">Category eresed</h1>
    </div>
</div>
<% include ../partials/footer %>